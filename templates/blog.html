{% extends "base.html" %}
{% import "macros.html" as macros %}

{% block title %}
    {{ section.title }} - {{ config.title }}
{% endblock title %}

{% block custom_head %}
    <link rel="stylesheet" href="/css/blog.css">
{% endblock custom_head %}

{% block content %}
<div id="blog-container">
    <div id="blog-header">
        <h1 id="heading">Bài viết</h1>
        <a href="/atom.xml" id="subscribe">
            <img src="/imgs/rss.svg" id="rss-icon"><span id="subscribe-text">Đăng kí</span></a>
    </div>
    {% set_global postCount = 0 %}
    {% for page in paginator.pages %}
        {% set_global postCount = postCount + 1 %}
        <div class="post">
            <h4 class="post-date">{{ page.date }}</h4>
            <h2 class="post-title"><a href="{{ page.permalink }}">{{ page.title }}</a></h2>
            <img src="{{ macros::get_cover(page=page) }}" class="post-cover">
            {% if page.extra.excerpt %}
            <p class="post-excerpt">{{ page.extra.excerpt }}</p>
            {% endif %}
        </div>
    {% endfor %}
    <nav id="pagination">
        {% if paginator.previous %}
            <a href="{{ paginator.previous }}" id="previous" class="button"></a>
        {% endif %}
        {% if paginator.next %}
            <a href="{{ paginator.next }}" id="next" class="button"></a>
        {% endif %}
    </nav>
    {% if postCount == 0 %}
        <div id="no-post">
            <img src="/imgs/frown.svg" alt="" id="sad-icon">
            <p>Chưa có bài viết nào được đăng.</p>
        </div>
    {% endif %}
    <script type="text/javascript">
        var userLang = navigator.language || navigator.userLanguage; 
        if(userLang != "vi-VN"){
            document.querySelector("#heading").textContent = "Writing";
            document.querySelector("#subscribe-text").textContent = "Subscribe";
            document.querySelector("#no-post p").textContent = "No post has been published.";
        }
    </script>
</div>
{% endblock content %}